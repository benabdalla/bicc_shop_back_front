<div class="page-wrapper">
  <div class="page-content container">
    <div class="card" id="section-to-print">
      <div class="card-body">
        <div id="invoice">
          <div class="toolbar hidden-print">
            <div class="text-end">
              <button
                type="button"
                class="btn btn-dark"
                (click)="printInvoice()"
              >
                <i class="fa fa-print"></i> Imprimer
              </button>
              <button
                type="button"
                class="btn btn-danger ms-2"
                (click)="exportPDF()"
              >
                <i class="fa fa-file-pdf-o"></i> Exporter en PDF
              </button>
            </div>
            <hr />
          </div>
          <div class="invoice overflow-auto">
            <div style="min-width: 600px">
              <header>
                <div class="row">
                  <div class="col">
                    <a href="javascript:;">
                      <img
                        src="assets/images/logo-icon.png"
                        width="80"
                        alt=""
                      />
                    </a>
                  </div>
                  <div class="col company-details">
                    <h2 class="name">
                      <a target="_blank" href="javascript:;"> BICC </a>
                    </h2>
                    <div>Tunis, Tunisie</div>
                    <div>biccmanager2025@gmail.com</div>
                  </div>
                </div>
              </header>
              <main>
                <div class="row contacts">
                  <div class="col invoice-to">
                    <div class="text-gray-light">FACTURE POUR :</div>
                    <h2 class="to">{{ customerName }}</h2>
                    <div class="address">{{ customerAddress }}</div>
                    <div class="email">
                      <a href="mailto:{{ customerEmail }}">{{ customerEmail }}</a>
                    </div>
                  </div>
                  <div class="col invoice-details">
                    <h1 class="invoice-id">FACTURE N°{{ order.id }}</h1>
                    <div class="date">
                      Date de la facture : {{ order.orderDate }}
                    </div>
                  </div>
                </div>
                <table>
                  <thead>
                    <tr>
                      <th>#</th>
                      <th class="text-left">NOM DU PRODUIT</th>
                      <th class="text-end">PRIX UNITAIRE</th>
                      <th class="text-end">QUANTITÉ</th>
                      <th class="text-end">SOUS-TOTAL</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngIf="order && order.orderDetails">
                      <tr
                        *ngFor="let item of order.orderDetails; let i = index"
                      >
                        <td class="no">{{ i + 1 }}</td>
                        <td class="text-left">
                          <h3>{{ item.productName }}</h3>
                        </td>
                        <td class="unit">
                          {{ item.productUnitPrice.toFixed(2) }}TND
                        </td>
                        <td class="qty">{{ item.quantity }}</td>
                        <td class="total">{{ item.subTotal.toFixed(2) }}TND</td>
                      </tr>
                    </ng-container>
                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="2"></td>
                      <td colspan="2">SOUS-TOTAL</td>
                      <td>{{ order.subTotal.toFixed(2) }}TND</td>
                    </tr>
                    <tr>
                      <td colspan="2"></td>
                      <td colspan="2">FRAIS DE LIVRAISON</td>
                      <td>
                        {{
                          order.shippingCharge !== undefined &&
                          order.shippingCharge !== null
                            ? order.shippingCharge.toFixed(2)
                            : "0.00"
                        }}TND
                      </td>
                    </tr>
                    <tr>
                      <td colspan="2"></td>
                      <td colspan="2">REMISE</td>
                      <td>
                        {{
                          order.discount !== undefined &&
                          order.discount !== null
                            ? order.discount.toFixed(2)
                            : "0.00"
                        }}TND
                      </td>
                    </tr>
                    <!-- <tr>
                      <td colspan="2"></td>
                      <td colspan="2">TAXE 10%</td>
                      <td>
                        {{
                          order.tax !== undefined && order.tax !== null
                            ? order.tax.toFixed(2)
                            : "0.00"
                        }}TND
                      </td>
                    </tr> -->
                    <tr>
                      <td colspan="2"></td>
                      <td colspan="2">TOTAL GÉNÉRAL</td>
                      <td>
                        {{
                          order.orderTotal !== undefined &&
                          order.orderTotal !== null
                            ? order.orderTotal.toFixed(2)
                            : "0.00"
                        }}TND
                      </td>
                    </tr>
                  </tfoot>
                </table>
                <div class="thanks">Merci pour votre commande !</div>
                <div class="notices">
                  <div>AVIS :</div>
                  <div class="notice">
                    Des frais financiers de 1,5 % seront appliqués sur les
                    soldes impayés après 30 jours.
                  </div>
                </div>
              </main>
              <footer>
                La facture a été générée électroniquement et est valide sans
                signature ni cachet.
              </footer>
            </div>
            <!--DO NOT DELETE THIS div. IT is responsible for showing footer always at the bottom-->
            <div></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
