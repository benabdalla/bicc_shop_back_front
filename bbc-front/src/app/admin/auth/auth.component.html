<div class="auth-wrapper">
  <div class="container">
    <div class="row">
      <div class="col">
        <div class="card mb-0">
          <div class="card-body">

            <!-- Enhanced Header Section -->
            <div class="p-4">
              <div class="brand-logo">
                <i class="fas fa-shield-alt"></i>
              </div>
              <h2 class="brand-title">Administration BICC</h2>
              <p class="brand-subtitle">Accès sécurisé administrateur</p>
            </div>

            <!-- Login Form -->
            <div class="auth-form" *ngIf="!showSignup">
              <div class="form-header">
                <h5>
                  <i class="fas fa-sign-in-alt me-2"></i>
                  Connexion Administrateur
                </h5>
                <p>Saisissez vos identifiants pour accéder au panneau d'administration</p>
              </div>

              <form #loginForm="ngForm">
                <div class="form-group">
                  <label class="form-label">
                    <i class="fas fa-envelope me-2"></i>Adresse Email
                  </label>
                  <div class="input-wrapper">
                    <input
                      type="email"
                      class="form-control"
                      placeholder="Entrez votre email"
                      name="email"
                      ngModel
                      required
                      email
                      #emailField="ngModel"
                      [class.is-invalid]="emailField.invalid && emailField.touched">
                    <div class="input-icon">
                      <i class="fas fa-user"></i>
                    </div>
                  </div>
                  <div *ngIf="emailField.invalid && emailField.touched" class="error-message">
                    <i class="fas fa-exclamation-circle"></i>
                    Veuillez entrer une adresse email valide
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <i class="fas fa-lock me-2"></i>Mot de passe
                  </label>
                  <div class="input-wrapper">
                    <input
                      [type]="showPassword ? 'text' : 'password'"
                      class="form-control"
                      placeholder="Entrez votre mot de passe"
                      name="password"
                      ngModel
                      required
                      #passwordField="ngModel"
                      [class.is-invalid]="passwordField.invalid && passwordField.touched">
                    <div class="input-icon">
                      <i class="fas fa-lock"></i>
                    </div>
                    <div class="password-toggle" (click)="togglePassword()">
                      <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                    </div>
                  </div>
                  <div *ngIf="passwordField.invalid && passwordField.touched" class="error-message">
                    <i class="fas fa-exclamation-circle"></i>
                    Le mot de passe est requis
                  </div>
                </div>

                <div class="form-options">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="rememberMe" name="rememberMe" ngModel>
                    <label class="form-check-label" for="rememberMe">Se souvenir de moi</label>
                  </div>
                  <a href="#" class="forgot-password" (click)="showForgotPassword($event)">
                    Mot de passe oublié?
                  </a>
                </div>

                <button
                  type="button"
                  class="btn btn-primary"
                  [class.loading]="isLoading"
                  (click)="onAdminLogin(loginForm.value)"
                  [disabled]="loginForm.invalid || isLoading">
                  <span *ngIf="!isLoading">
                    <i class="fas fa-sign-in-alt me-2"></i>Se connecter
                  </span>
                  <span *ngIf="isLoading">
                    <div class="spinner"></div>Connexion en cours...
                  </span>
                </button>
              </form>
            </div>

            <!-- Signup Form -->
            <div class="auth-form" *ngIf="showSignup">
              <div class="form-header">
                <h5>
                  <i class="fas fa-user-plus me-2"></i>
                  Créer un compte Admin
                </h5>
                <p>Créez un nouveau compte administrateur</p>
              </div>

              <form #signupForm="ngForm">
                <div class="form-group">
                  <label class="form-label">
                    <i class="fas fa-user me-2"></i>Nom complet
                  </label>
                  <div class="input-wrapper">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Entrez votre nom complet"
                      name="name"
                      ngModel
                      required
                      #nameField="ngModel"
                      [class.is-invalid]="nameField.invalid && nameField.touched">
                    <div class="input-icon">
                      <i class="fas fa-user"></i>
                    </div>
                  </div>
                  <div *ngIf="nameField.invalid && nameField.touched" class="error-message">
                    <i class="fas fa-exclamation-circle"></i>
                    Le nom complet est requis
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <i class="fas fa-envelope me-2"></i>Adresse Email
                  </label>
                  <div class="input-wrapper">
                    <input
                      type="email"
                      class="form-control"
                      placeholder="Entrez votre email"
                      name="email"
                      ngModel
                      required
                      email
                      #signupEmailField="ngModel"
                      [class.is-invalid]="signupEmailField.invalid && signupEmailField.touched">
                    <div class="input-icon">
                      <i class="fas fa-envelope"></i>
                    </div>
                  </div>
                  <div *ngIf="signupEmailField.invalid && signupEmailField.touched" class="error-message">
                    <i class="fas fa-exclamation-circle"></i>
                    Veuillez entrer une adresse email valide
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <i class="fas fa-lock me-2"></i>Mot de passe
                  </label>
                  <div class="input-wrapper">
                    <input
                      [type]="showPassword ? 'text' : 'password'"
                      class="form-control"
                      placeholder="Créez un mot de passe fort"
                      name="password"
                      ngModel
                      required
                      minlength="8"
                      #signupPasswordField="ngModel"
                      [class.is-invalid]="signupPasswordField.invalid && signupPasswordField.touched">
                    <div class="input-icon">
                      <i class="fas fa-lock"></i>
                    </div>
                    <div class="password-toggle" (click)="togglePassword()">
                      <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                    </div>
                  </div>
                  <div *ngIf="signupPasswordField.invalid && signupPasswordField.touched" class="error-message">
                    <i class="fas fa-exclamation-circle"></i>
                    Le mot de passe doit contenir au moins 8 caractères
                  </div>
                </div>

                <button
                  type="button"
                  class="btn btn-primary"
                  [class.loading]="isLoading"
                  (click)="onAdminSignup(signupForm.value)"
                  [disabled]="signupForm.invalid || isLoading">
                  <span *ngIf="!isLoading">
                    <i class="fas fa-user-plus me-2"></i>Créer le compte
                  </span>
                  <span *ngIf="isLoading">
                    <div class="spinner"></div>Création en cours...
                  </span>
                </button>
              </form>
            </div>

            <!-- Toggle Between Forms -->
            <div class="form-toggle" *ngIf="allowSignup">
              <p *ngIf="!showSignup">
                Pas encore de compte admin?
                <a href="#" (click)="toggleSignup($event)" class="toggle-link">Créer un compte</a>
              </p>
              <p *ngIf="showSignup">
                Déjà un compte?
                <a href="#" (click)="toggleSignup($event)" class="toggle-link">Se connecter</a>
              </p>
            </div>

            <!-- Enhanced Footer -->
            <div class="auth-footer">
              <div class="security-info">
                <i class="fas fa-shield-alt"></i>
                Votre connexion est sécurisée et chiffrée
              </div>
              <div class="admin-info">
                <i class="fas fa-users-cog me-2"></i>
                Panneau d'administration BICC Shop
              </div>
              <p class="copyright">&copy; 2024 BICC Shop. Tous droits réservés.</p>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Enhanced Alert Messages -->
<div class="alert-container">
  <div *ngIf="errorMessage" class="alert alert-danger">
    <i class="fas fa-exclamation-triangle"></i>
    <span>{{ errorMessage }}</span>
    <button type="button" class="btn-close" (click)="clearError()">&times;</button>
  </div>

  <div *ngIf="successMessage" class="alert alert-success">
    <i class="fas fa-check-circle"></i>
    <span>{{ successMessage }}</span>
    <button type="button" class="btn-close" (click)="clearSuccess()">&times;</button>
  </div>
</div>
